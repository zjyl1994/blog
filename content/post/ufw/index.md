---
title: "使用UWF保护电脑免遭全家桶"
date: 2018-02-27T22:48:00+08:00
lastmod: 2018-02-27T22:48:00+08:00
draft: false
---

春节回家，几乎是修了好几天电脑。没有办法，现在国产全家桶实在是太厉害了，你随便搜个想要的软件，直接安装就会中各种全家桶。

我回家在我爸的电脑里发现了各种播放器各种压，桌面被各种助手占据，悬浮窗五六个，还有时候被装上奇怪的输入法，安全软件也不止一份。

对于我这种电脑从业人士来说，要想避开那些捆绑安装还是很轻松的，但是家里的普通人们就不一定了。他们习惯于缺少功能，就去百度搜一下，点击高速下载，然后中各种下载器。下载器下载的安装包装完推荐的各种勾也不取消直接点立即体验来打开所需要的应用。这不是教的问题，谁能指望五六十岁的长辈们和我们年轻人一样对各种电脑问题如此精通呢？

为了解决这个问题，我想到了机房常用的还原卡。小学机房就有还原卡，做任何操作只要重启就会还原到老师刚装好的状态。但是还原卡第一是要买硬件产品，第二是笔记本没法装。经过苦苦搜索终于找到了适合Windows10的软件还原卡方法，不需要额外花钱买硬件，通吃所有设备。这一切只需要你有Windows10企业版或者教育版。（企业版实测通过，教育版据说也有这个功能）（Windows其他版本升级到企业版只需要安装企业版密钥并进行激活即可。）

<!--more-->

Windows10企业版有一个很好的功能，就是Unified Write Filter，中文名为“统一写入过滤器”。简单的工作原理就是把对要保护硬盘的写入暂存，而不是真实的写入硬盘本身。也就是说，这是一个内核级的软还原卡。建议用这个功能的时候物理内存大一些，免得后期使用过卡。

首先你需要先激活Win10企业版，然后在控制面板->程序和功能->启用和关闭Windows功能->设备锁定中选中统一写入筛选器。

![统一写入筛选器的位置](ufw1.png)

然后按Win+X弹出高级功能菜单，选择“Windows PowerShell（管理员）”。打开拥有管理员权限的PS后，输入如下命令：

```powershell
uwfmgr filter enable	# 开启UWF过滤器
uwfmgr volume protect c: # 保护C盘
```

按照上面的指令操作后，重启电脑。你的C盘就处于UWF保护下了，无论你做什么操作C盘都不会被污染，中全家桶之后只要重启就又是完好如初的状态。

要想解除UWF，你还是需要打开“Windows PowerShell（管理员）”，输入以下命令：
```powershell
uwfmgr volume unprotect c: # 取消C盘的保护
uwfmgr filter disable	# 开启UWF过滤器
```

经过这样一系列设置，你就可以放心大胆的把电脑交给长辈了，永远也不会中什么乱七八糟的卫士，压缩软件和桌面助手。因为每次重启C盘都会被重置到你设置保护的那个时刻。即使卫士什么的学聪明了躲到其他盘里，也会因为C盘没有对应的自动启动方式而无法自启动祸害电脑。

说真的，国产软件的名声就是被这些外门邪道害了。买别人捆绑的推广，一时间装机量上去了数据好看了，实际上用户发现一个删一个，想靠捆绑安装建立用户忠诚度简直是天方夜谭。追这些虚的数据有啥用，商业上要的是忠诚肯花钱的死忠用户，而不是被捆绑搞得一肚子气的敌对用户。